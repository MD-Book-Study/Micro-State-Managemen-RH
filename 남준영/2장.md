# 지역 상태와 전역 상태 사용하기

## 2장 지역 상태와 전역 상태 사용하기

---

트리의 상위 컴포넌트에서 지역 상태를 만들고 컴포넌트와 자식 컴포넌트에서 해당 상태를 사용하면 지역성과 재사용성 측면에서 좋지만 멀리 떨어져 있는 컴포넌트간 공통적인 상태가 필요한 경우 전역 상태가 필요하다.

### 언제 지역 상태를 사용할까?

같은 인수에 대 항상 같은 값을 반환하는 순수 함수는 동작을 예측할 수 있어서 선호 된다.

```jsx
let base = 1;

// addBase는 외부 변수 base에 의존된다.
const addBase = (n) => n + base;
```

base가 싱글턴(자바스크립트의 전역 변수는 window 객체에 등록되어 사용된 싱글턴이다.)으로 사용되면 재사용성이 떨어지기 떄문에 컨테이너 객체를 만들어서 모듈화 하면 된다. 서로 영향을 끼치지 않는다.

```jsx
const creatContainer = () => {
  let base = 1;
  const addBase = (n) => n + base;
  return { addBase };
};

const { addBase } = createContainer();
```

아래 AddBase에서 useState로 사용중인 base는 changeBase를 함수 선언 범위 내에서만 사용할 수 있기 때문에 억제되었다고 표현하며 지역성을 보장한다. 함수 컴포넌트 외부에서 상태를 변경하고 싶다면 전역 상태를 사용해야 된다. 전역 상태는 컴포넌트 동작을 예측하기 어렵게 하기 때문에 사용을 자제하는것이 좋다.

```jsx
const AddBase = ({ number }) = > {
	const [base, changeBase] = useState(1);
	return <div>{number + base}</div>
}
```

### 지역 상태를 효과적으로 사용하는 방법

1. 상태 끌어올리기 (Lifting State Up) -부모 컴포넌트 트리에서 상태를 정의
   -props로 전달한 상태는 하위 트리 전체를 리렌더링 하기 때문에 성능에 안좋다.

2. 내용 끌어올리기 (Lifting Content Up)

- 부모 컴포넌트 트리에서 내용을 정의
- 변경되지 않는 요소를 { children }으로 사용해서 의미없는 리렌더링을 막을 수 있다.

```jsx
const GrandParent = () => {
	return (
		<Parent>
			<AdditionInfo /> // children
		</Parent>
	)
}

const Parent = ({ children }) => {
	...
}
```

### 전역 상태란?

하나의 컴포넌트에 속하고 컴포넌트에 의해 캡슐화된 상태가 지역 상태라면 전역 상태는 하나의 컴포넌트에 속하지 않고 여러 컴포넌트에서 사용될 수 있다.

전역 변수는 크게 props으로 전달하기 적절하지 않을 때 (너무 깊어서), 이미 리엑트 외부에 상태가 있을 때 사용된다.

---

## Question

### 질문 1: 지역 상태와 전역 상태의 차이점은 무엇인가요?

지역 상태는 특정 컴포넌트 내부에서만 사용되고 관리되는 상태를 말합니다. 이 상태는 컴포넌트가 재사용되고 예측 가능하도록 만들며, 주로 컴포넌트의 UI 상태를 관리하는 데 사용됩니다. 반면, 전역 상태는 여러 컴포넌트에 걸쳐 공유되는 상태입니다. 전역 상태는 특정 컴포넌트에 속하지 않으며, 애플리케이션의 많은 부분에서 접근하고 수정할 수 있습니다. 전역 상태는 네비게이션 바의 사용자 로그인 정보나 앱의 테마와 같이 여러 컴포넌트에서 공유되어야 하는 정보를 관리할 때 유용합니다.

### 질문 2: 상태를 끌어올리기(Lifting State Up)는 무엇이며, 언제 사용하는 것이 적절한가요?

상태 끌어올리기는 React에서 상태 관리의 한 기법으로, 관련된 여러 자식 컴포넌트들 사이에서 공유되어야 하는 상태를 해당 컴포넌트들의 공통 부모 컴포넌트로 이동시키는 것을 말합니다. 이 방식은 상태를 더 높은 계층으로 옮김으로써, 여러 자식 컴포넌트들이 동일한 상태를 기반으로 동작할 수 있도록 합니다. 상태 끌어올리기는 특히, 여러 컴포넌트들이 같은 데이터에 의존하고 그 데이터를 기반으로 UI를 업데이트해야 할 때 사용하는 것이 적절합니다. 예를 들어, 여러 입력 필드의 값들을 기반으로 결과를 계산해야 하는 폼이 있을 때, 각 입력 필드의 상태를 공통 부모 컴포넌트로 끌어올려서 효율적으로 관리할 수 있습니다.

### 질문 3: React에서 전역 상태 관리를 하는 방법에는 어떤 것들이 있나요?

React에서 전역 상태 관리를 위해 여러 방법과 도구를 사용할 수 있습니다. 가장 기본적인 접근 방법은 React의 Context API를 사용하는 것입니다. Context API를 통해 컴포넌트 트리를 통해 데이터를 쉽게 전달할 수 있으며, 이는 주로 전역 상태 관리에 사용됩니다. 또한, 상태 관리 라이브러리인 Redux, MobX, Recoil 등을 사용하여 애플리케이션의 상태를 보다 체계적으로 관리할 수 있습니다. 이러한 라이브러리들은 상태를 중앙에서 관리하고, 컴포넌트들 사이에서 상태를 쉽게 공유할 수 있도록 해줍니다. 선택하는 도구나 방법은 애플리케이션의 규모, 복잡성 및 팀의 선호도에 따라 달라질 수 있습니다.
