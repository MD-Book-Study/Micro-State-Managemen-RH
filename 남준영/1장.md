# 1장 리액트 훅을 이용한 마이크로 상태 관리

리엑트에서 상태는 사용자 인터페이스(UI)를 나타내는 모든 데이터를 말한다. 리엑트 훅이 나오기 전까지는 중앙 집중형 상태 관리 라이브러리를 사용했지만 리엑트 훅으로 인해 새로운 방법이 생겼다.

(폼 상태, 서버 캐시 상태 관리)

서버 상태를 주로 다루는 애플리케이션이라면 소수의 전역 상태만 필요할 것이고, 풍부한 그래픽을 제공하는 경우는 많은 전역 상태가 필요로 한다. 이렇듯 범용적인 상태 관리를 위한 방법은 가벼워야 하며, 개발자는 요구사항에 따라 적절한 방법을 선택해야 한다. 이를 가르켜 마이크로 상태 관리라고 한다.

## 리엑트 훅 사용

기본적인 리엑트 훅에는 useState, useReducer, useEffect가 있다. 리엑트 훅은 서스펜스, 동시성 렌더링과 함께 작동하도록 설계 및 개발되었다.

\*서스펜스: 데이터 불러오기를 위한 서스펜스는 비동기 처리에 대한것.

\*동시성 렌더링: 렌더링 프로세스를 청크로 분할해서 중앙 처리 장치(CPU)가 장시간 차단되는 것을 방지

### useState

```jsx
const init = () => 0; // 지연 초기화 (mount 될 때 한번만 실행)

const useCount = () => {
	const [count, setCount] = useState(init);
	return [count, setCount];
};

const Component = () => {
	const [count, setCount] = **useCount**();
}
```

useCount로 이름을 지정하면 코드의 가독성이 좋아진다. 또한 Component에서 분리됐으므로 독립적으로 관리가 가능하다.

### useReducer

```jsx
const init = (count) => ({count, text: 'hi')} // 지연 초기화 (똑같이 mount 시 한번만) 사용: useReducer(reducer,0,init)

const reducer = (state, action) => {
	switch(action.type) {
			case 'INC':
				return {...state, count: state.count +1 }
			case 'SET_TEXT':
				if (!action.text) return state // 베일 아웃 (리 렌더링x)
				return {...state, text: action.text}
			default:
				....
		}
}

const Component = () => {
	const [state, dispatch] = **useReducer**(
		reducer, // reducer fucntion
		{ count: 0, text: 'hi'} // initial
	);

	...
	onClick={() => dispatch({type: 'INC'})
}
```

useState는 useReducer로 구현되어 있기 때문에 서로를 대체가 가능하다.

reducer와 init을 훅이나 컴포넌트 외부에서 정의할 수 있는 점은 useReducer에서만 가능하다. 이러한 특별한 경우를 제외하고는 두개를 취향것 선택하면 된다.
